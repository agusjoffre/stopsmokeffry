generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String       @id @unique
  name             String
  startDate        String
  cigarettePrice   Int
  cigarettesPerDay Int
  isChallenge      Boolean      @default(false)
  code             String       @unique @default(uuid())
  friends          Friendship[] @relation("friends")
  friendsOf        Friendship[] @relation("friendsOf")
}

model Friendship {
  friendId   String
  friendOfId String
  state      FriendshipState @default(PENDING)
  friends    User            @relation("friends", fields: [friendId], references: [id])
  friendsOf  User            @relation("friendsOf", fields: [friendOfId], references: [id])

  @@id([friendOfId, friendId])
}

enum FriendshipState {
  ACCEPTED
  PENDING
  REJECTED
}
